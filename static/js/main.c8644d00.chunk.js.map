{"version":3,"sources":["images/Add.png","model/user.js","pages/LoginPage.js","model/Category.js","model/ShoppingGroup.js","components/SelectActiveGroupModal.js","components/CreateNewGroupModal.js","components/ShoppingItemComponent.js","components/CategoryListComponents.js","model/ShoppingItem.js","model/ShoppingList.js","components/BaseListComponents.js","components/CategoryNewModal.js","pages/ShoppingPage.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","User","parseModel","this","id","email","get","name","phone","isManager","pwd","Parse","logIn","parseUser","user","newUserMail","Object","extend","query","Query","equalTo","find","result","LoginPage","props","state","showInvalidLoginError","redirectToNextPage","handleInputChange","bind","login","event","target","value","type","checked","setState","handleLogin","then","catch","error","console","to","errorAlert","Alert","variant","Container","className","Form","Group","controlId","Label","Control","placeholder","onChange","Button","block","onClick","Component","Category","imgFile","newCategoryName","ParseCategory","NewCategoryObject","set","parseFile","File","save","newCategory","categoryName","length","ShoppingGroup","lstUsers","lstShoppingLists","categories","groupName","NewCategory","ParseShoppingList","NewShoppingListObject","relation","newShoppingList","ParseShoppingGroup","currentShoppingGroup","add","getCategory","theCatrgoryObject","queryGroup","shoppingLists","newGroupName","users","myNewShoppingGroup","response","theGroupName","first","currentUser","current","groupListResults","lstItems","forEach","item","push","activeGroup","lstCategiriesItems","map","SelectActiveGroupModal","CancelSelection","handleClose","errorMessage","log","HandleGroupSelection","selectedGroupName","selectedGroup","acceptGroupSelection","GetGroupByName","createNewGroup","isShowCreateNewGroup","HandleCreateNewGroup","lstGroups","GetGroupList","selectedItem","handleGroupSelection","code","message","selected","show","lstGroupsOption","index","key","Modal","onHide","Header","Title","Body","as","Footer","CreateNewGroupModal","CreateNewGroup","NewGroup","AddUser","findUserbyEmail","undefined","concat","theUsers","join","rows","ShoppingItemComponent","enterEditingItem","newCount","count","fileImg","file","URL","createObjectURL","HandleClosePopup","refs","overlay","handleHide","HandlePropertiesItem","showUpdateProperties","handleCountChange","valueAsNumber","handleFileChange","newFileImg","files","HandleDeleteItem","isCompleted","wasChanged","HandleMouseLeave","showChangeItemIcon","handleMouseEnter","HandleOkPopup","UpdateShoppingItemCount","UpdateShoppingItemImage","img","completedClass","showImagetooltip","itemText","popover","Popover","Content","Row","Col","min","Image","src","fluid","deleteButtonClass","onMouseOver","onMouseLeave","tooltip","OverlayTrigger","trigger","onEnter","placement","rootClose","ref","imageAddSource","alt","CategoryListComponents","handleSelect","selectedTab","setActiveShoppingList","categoryArray","itemsLists","element","Tab","eventKey","title","Tabs","activeKey","onSelect","ShoppingItem","shoppingItemId","ShoppingItemParse","object","newfile","product","newShoppingItem","newShoppingItemObject","ProductItem","newProductItemObject","newObject","ParseShoppingItem","ShoppingItemList","shoppingItem","fetch","productName","productImageSrc","activeShoppingList","theShoppingItem","ShoppingList","itemsRelation","queryItems","shoppingItems","BaseListComponents","newText","newItemText","handleKeyDownEvent","HandleNewItem","addShoppingItem","changeItemCount","CompletedTaskHandler","shoppingItemsArray","activeCategory","getShoppingItemsParams","CreateNewShoppingListinGroup","ClearCategoryDialog","handleCategoryClose","addShoppingItemToList","newItem","GetShoppingListByCategoryAndGroup","theShoppingList","GetShoppingItemsByList","OnCompletedTask","isDisablesInput","ListGroup","InputGroup","size","FormControl","aria-label","aria-describedby","onKeyDown","disabled","Append","CategoryNewModal","createNewCategory","addCategoryToGroup","ShoppingPage","logout","handleLogout","redirectToLogin","isToSelection","showSelectActiveGroup","showCreateActiveGroup","isNewCategory","showCategoryNew","readCategoryListbyGroup","HandleCategoryOpen","group","setGroup","activeUser","logoutLink","Nav","Link","activeGroupName","Navbar","expand","Brand","href","width","height","Toggle","aria-controls","Collapse","App","logOut","exact","path","getGroup","React","Boolean","window","location","hostname","match","serverURL","initialize","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c8644d00.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAABVSURBVDhP5ZIxEgAQDATzAl/maX52ggpbSEuxKdZNCheTdGA5FUdAObK7GPKzBV0C1aEF3a9ZHxS8B2UElBFQRkAZwcf6q5P7FvZeR7fzkRa8d8qyBtqT7fkTzJl6AAAAAElFTkSuQmCC\"","import Parse from 'parse';\r\n\r\n\r\n\r\n//class user\r\nexport default class User {\r\n    constructor(parseModel) {\r\n\r\n        this.id = parseModel.id;\r\n        this.email = parseModel.get(\"email\");\r\n        this.name = parseModel.get(\"name\");\r\n        this.phone = parseModel.get(\"phone\");\r\n        this.isManager = parseModel.get(\"isManager\");\r\n\r\n    }\r\n    // login in parse\r\n    static async login(email, pwd) {\r\n\r\n    const parseUser = await Parse.User.logIn(email, pwd);\r\n    const user = new User(parseUser);\r\n    return user;\r\n\r\n    }\r\n\r\n    static async findUserbyEmail(newUserMail){\r\n\r\n        const user   = Parse.Object.extend('User');\r\n        const query = new Parse.Query(user);\r\n        query.equalTo(\"email\", newUserMail);\r\n        const result=await query.find();\r\n        return result;\r\n\r\n    }\r\n\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { Form, Button, Alert,Container } from 'react-bootstrap';\r\nimport User from '../model/user';\r\nimport './LoginPage.css';\r\nimport { Redirect } from 'react-router-dom';\r\nexport default  class LoginPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: \"\",\r\n            pwd: \"\",\r\n            showInvalidLoginError: false,\r\n            redirectToNextPage: false\r\n        }\r\n\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.login = this.login.bind(this);\r\n    }\r\n\r\n    handleInputChange(event) {\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            [name]: value,\r\n            showInvalidLoginError: false  // clean the error \r\n        });\r\n    \r\n    }\r\n\r\n\r\n         login() {\r\n            const { handleLogin } = this.props;\r\n            const { email, pwd } = this.state;\r\n\r\n            User.login(email, pwd).then(user => {\r\n                handleLogin(user);\r\n                this.setState({\r\n                    redirectToNextPage: true\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error while logging in user', error);\r\n                this.setState({\r\n                            showInvalidLoginError: true,\r\n                            pwd: \"\"\r\n                        });\r\n            });\r\n\r\n    }\r\n\r\n    render() {\r\n        const { email, pwd, showInvalidLoginError, redirectToNextPage } = this.state;\r\n\r\n         if (redirectToNextPage) {\r\n             return <Redirect to=\"/shopping\"/>\r\n         }\r\n        const errorAlert = showInvalidLoginError ? <Alert variant=\"danger\">Invalid email or password!</Alert> : null;\r\n\r\n        return (\r\n            <Container>\r\n            <div className=\"p-login\">\r\n                <div className=\"main\">\r\n                    <h1>ShareToBuy</h1>\r\n                    {errorAlert}\r\n                    <Form>\r\n                        <Form.Group controlId=\"formBasicEmail\">\r\n                            <Form.Label>Email address</Form.Label>\r\n                            <Form.Control name=\"email\" value={email}\r\n                                type=\"email\" placeholder=\"הכנס דואר אלקטרוני\" onChange={this.handleInputChange} />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group controlId=\"formBasicPassword\">\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control name=\"pwd\" value={pwd}\r\n                                type=\"password\" placeholder=\"ססמא\" onChange={this.handleInputChange} />\r\n                        </Form.Group>\r\n                        <Button variant=\"info\" type=\"button\" block onClick={this.login}>\r\n                            כניסה\r\n                        </Button>\r\n                    </Form>\r\n                </div>\r\n            </div>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n","import Parse from 'parse';\r\n\r\nexport default class Category\r\n{\r\n    constructor(parseModel)\r\n    {\r\n        this.name=parseModel.get(\"categoryName\");;\r\n        this.imgFile=parseModel.get(\"categoryImageSrc\");\r\n    }\r\n\r\n\r\n    static async createNewCategory(newCategoryName,imgFile)\r\n    {\r\n        // create the category in the db\r\n        const ParseCategory = Parse.Object.extend('Category');\r\n        const NewCategoryObject = new ParseCategory(); \r\n        NewCategoryObject.set('categoryName', newCategoryName);\r\n        if (imgFile){\r\n            var parseFile = new Parse.File(imgFile.name, imgFile);\r\n            NewCategoryObject.set('categoryImageSrc', parseFile); \r\n        }\r\n        \r\n         const newCategory= await NewCategoryObject.save();\r\n         return newCategory;\r\n                \r\n    }\r\n\r\n    static async getCategory(categoryName)\r\n    {\r\n\r\n        const ParseCategory   = Parse.Object.extend('Category');\r\n        const query = new Parse.Query(ParseCategory);\r\n        query.equalTo(\"categoryName\", categoryName);\r\n        const result=await query.find();  // we are getting an array\r\n        if (result && result.length>0)\r\n            return result[0];\r\n        return result;\r\n\r\n    }\r\n\r\n\r\n}","\r\nimport Parse from 'parse';\r\nimport Category from '../model/Category';\r\n\r\nexport default class ShoppingGroup{\r\n\r\n    constructor(parseModel) {\r\n           \r\n        \r\n        this.lstUsers = parseModel.get(\"lstUsers\");\r\n        this.lstShoppingLists = parseModel.get(\"lstShoppingLists\");\r\n        this.categories=parseModel.get(\"categories\");\r\n        this.groupName = parseModel.get(\"GroupName\");\r\n        this.id = parseModel.id;\r\n       // this.shpingGroupParseModel=parseModel\r\n        \r\n        \r\n    }\r\n\r\n    // creates new group in the db\r\n    static async CreateNewGroup(newGroupName,users)\r\n    {\r\n\r\n           // db connection    ( should be handles saparately)\r\n           const ParseShoppingGroup = Parse.Object.extend('ShoppingGroup');\r\n           const myNewShoppingGroup = new ParseShoppingGroup(); \r\n           myNewShoppingGroup.set('GroupName', newGroupName);\r\n           myNewShoppingGroup.set('lstUsers', users);\r\n           myNewShoppingGroup.set('lstShoppingLists', []);   //  create empty list\r\n           const response = await myNewShoppingGroup.save();\r\n            return response;\r\n           \r\n    }\r\n\r\n    static async GetGroupByName(theGroupName)\r\n    {\r\n        const ParseShoppingGroup = Parse.Object.extend('ShoppingGroup');\r\n        const query = new Parse.Query(ParseShoppingGroup);\r\n        query.equalTo(\"GroupName\", theGroupName);\r\n        const result=await query.first();   \r\n        return result;        \r\n    }\r\n\r\n\r\n    static async GetGroupList()\r\n    {\r\n        var currentUser=Parse.User.current();\r\n        const ParseShoppingGroup = Parse.Object.extend('ShoppingGroup');\r\n        const query = new Parse.Query(ParseShoppingGroup);\r\n        query.equalTo(\"lstUsers\", currentUser.id);\r\n        const groupListResults=await query.find();         \r\n        let lstItems=[];\r\n        groupListResults.forEach(\r\n                    item=>lstItems.push(item.get(\"GroupName\"))\r\n        )\r\n        return lstItems;\r\n             \r\n    }\r\n\r\n    async CreateNewShoppingListinGroup(NewCategory)\r\n    {\r\n         // create the category in the db\r\n         const ParseShoppingList = Parse.Object.extend('ShoppingList');\r\n         const NewShoppingListObject = new ParseShoppingList(); \r\n\r\n         NewShoppingListObject.set(\"category\", NewCategory);\r\n         var relation = NewShoppingListObject.relation(\"shoppingItems\");\r\n\r\n        // This will save both myPost and myComment\r\n        const newShoppingList= await NewShoppingListObject.save();\r\n        // return newShoppingList;\r\n\r\n        const ParseShoppingGroup = Parse.Object.extend('ShoppingGroup');\r\n        const query = new  Parse.Query(ParseShoppingGroup) ; \r\n        const currentShoppingGroup=await query.get(this.id);\r\n        var relation = currentShoppingGroup.relation(\"shoppingLists\");\r\n        relation.add(newShoppingList);\r\n        const result=await currentShoppingGroup.save();\r\n        return result;\r\n\r\n    }\r\n\r\n\r\n    async GetShoppingListByCategoryAndGroup(categoryName)\r\n    {    \r\n        const theCatrgoryObject=await Category.getCategory(categoryName);\r\n\r\n        const ParseShoppingGroup = Parse.Object.extend('ShoppingGroup');\r\n        const queryGroup = new  Parse.Query(ParseShoppingGroup) ; \r\n        const currentShoppingGroup=await queryGroup.get (this.id);\r\n\r\n        var relation = currentShoppingGroup.relation(\"shoppingLists\");\r\n        var query = relation.query();\r\n        query.equalTo(\"category\", theCatrgoryObject);\r\n        const shoppingLists=await query.find();\r\n\r\n       if (shoppingLists && shoppingLists.length>0)\r\n                return shoppingLists[0];\r\n\r\n        return null;\r\n        \r\n    }\r\n\r\n   \r\n    async addCategoryToGroup(newCategory)\r\n    {\r\n        const ParseShoppingGroup = Parse.Object.extend('ShoppingGroup');\r\n        const query = new  Parse.Query(ParseShoppingGroup) ; \r\n        const currentShoppingGroup=await query.get(this.id);\r\n       \r\n        var relation = currentShoppingGroup.relation(\"categories\");\r\n        relation.add(newCategory);\r\n        const result=await currentShoppingGroup.save();\r\n\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n   \r\n\r\n    static async readCategoryListbyGroup(activeGroup){\r\n        const ParseShoppingGroup = Parse.Object.extend('ShoppingGroup');\r\n        const queryGroup = new  Parse.Query(ParseShoppingGroup) ; \r\n        const currentShoppingGroup=await queryGroup.get(activeGroup.id);\r\n\r\n        var relation = currentShoppingGroup.relation(\"categories\");\r\n        var query = relation.query();\r\n        const categories=await query.find();\r\n\r\n        let lstCategiriesItems=categories.map(item=>new Category(item))\r\n\r\n        return lstCategiriesItems;\r\n        \r\n    }\r\n\r\n   \r\n}","import React, { Component } from 'react';\r\nimport { Modal, Button, Form } from 'react-bootstrap';\r\nimport './SelectActiveGroupModal.css';\r\nimport ShoppingGroup from '../model/ShoppingGroup';\r\n\r\n\r\n//SelectActiveGroupModal\r\n// used to select a group , from the groups that are found in the DB and the active user is a member\r\n// props:\r\n//    -activeUser- who is the active user\r\n//    -activeGroup- who is the current active group ( the one before this dialog was opened)\r\n//    -handleClose- the function that will be handling close this dialog\r\n//    -handleGroupSelection- the function that is responsible for the selection of the new created group \r\n//    -HandleCreateNewGroup- is called when new group creation was chosen\r\n//state: \r\n//   - isShowCreateNewGroup- if need to open the createNewGroup dialog\r\n//   - lstGroups- the list of existing groups , from the db (only name)\r\n//   - selectedGroup- the group that was selected (only name)\r\n//   - errorMessage- messages that will be shown to the user on the dialog footer\r\n\r\n\r\nexport default class SelectActiveGroupModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n\r\n        // lst groups are only the names\r\n        // selected is also the name. \r\n        this.state = {\r\n            isShowCreateNewGroup:false,\r\n            lstGroups:[],\r\n            selectedGroup:\"\",\r\n            errorMessage:\"\"\r\n        }\r\n\r\n        this.GetGroupByName=this.GetGroupByName.bind(this);\r\n\r\n    }\r\n\r\n    async componentDidMount()\r\n    {\r\n        this.GetGroupList();\r\n\r\n    }\r\n    // on pressing on the cancel button\r\n    CancelSelection=()=>{\r\n        if (this.props.activeGroup)  // the previos group \r\n        {\r\n            this.props.handleClose();\r\n            this.setState({\r\n                errorMessage:\"\"\r\n            })    \r\n        }\r\n        else{\r\n            console.log(\" initial group was empty , you must select a group\");\r\n            this.setState({\r\n                errorMessage:\"Initial group was empty, select a group\"\r\n            })     \r\n         }\r\n    }\r\n\r\n    // set in the state the selected item\r\n    HandleGroupSelection=(event)=>{   \r\n           let selectedGroupName=event.target.value;\r\n           this.setState({\r\n                selectedGroup:selectedGroupName,\r\n                errorMessage:\"\"\r\n           })\r\n    }\r\n\r\n    // when ok, look for the group in the db, and send it to the app\r\n    acceptGroupSelection=()=>{\r\n\r\n        if (!this.state.selectedGroup)\r\n        {\r\n            console.log(\"no group was selected\");\r\n            this.setState({\r\n                errorMessage:\"no group was selected\"\r\n            })     \r\n        }\r\n        else{\r\n        this.setState({\r\n            errorMessage:\"\"\r\n        })     \r\n        this.GetGroupByName(this.state.selectedGroup);\r\n        this.props.handleClose();\r\n        }\r\n    }\r\n\r\n    //open the NewGroup Dialog\r\n    createNewGroup=()=>{\r\n        this.setState({isShowCreateNewGroup:true});\r\n        this.props.HandleCreateNewGroup();\r\n    }\r\n\r\n    // get from the db the group itself, according to the group name, and send it to app \r\n    GetGroupByName(theGroupName)\r\n    {\r\n           ShoppingGroup.GetGroupByName(theGroupName)\r\n           .then(result => {           \r\n            let selectedItem= new ShoppingGroup(result);\r\n            this.props.handleGroupSelection(selectedItem); \r\n          })\r\n          .catch(function(error){\r\n            console.log(\"Error in get group by name: \" + error.code + \" \" + error.message); \r\n            this.setState({\r\n                errorMessage:\"Error Getting Group\"\r\n            })      \r\n        });\r\n    }\r\n\r\n    // get the list of the groups that the user is member of\r\n    async GetGroupList()\r\n    {        \r\n        ShoppingGroup.GetGroupList().then\r\n        (lstItems=> {       \r\n            let selected=lstItems.length>0?lstItems[0]:\"\" ;   // set as selected the firzst item\r\n            this.setState({\r\n                    lstGroups:lstItems,\r\n                    selectedGroup:selected\r\n                });\r\n        })\r\n        .catch(error => {\r\n            console.error('Error while fetching ShoppingGroup for the current user', error);\r\n        });\r\n        \r\n    }\r\n \r\n    render() {\r\n        const { show, handleClose} = this.props;\r\n        const {lstGroups,errorMessage,selectedGroup}=this.state\r\n\r\n         let lstGroupsOption=lstGroups.map((item,index)=>\r\n         <option key={index}>{item} </option>)\r\n               \r\n        return (        \r\n            <Modal show={show} className=\"group-settings\"  onHide={handleClose}>\r\n                <Modal.Header>\r\n                    <Modal.Title>בחירת קבוצה</Modal.Title>          \r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                     <Form >\r\n                        <Form.Group >\r\n                            <Form.Label>בחר קבוצה </Form.Label>\r\n                            <Form.Control as=\"select\"  value={selectedGroup} onChange ={this.HandleGroupSelection}>\r\n                           { lstGroupsOption}\r\n                            </Form.Control>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group >\r\n                            <Form.Label> או צור קבוצה חדשה &emsp; &emsp;</Form.Label>\r\n                            <Button variant=\"info\" onClick={this.createNewGroup}>\r\n                                צור קבוצה\r\n                            </Button>\r\n                        </Form.Group>\r\n                    </Form> \r\n                    </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Form.Group>\r\n                            <Form.Label>{errorMessage}</Form.Label>\r\n                    </Form.Group>\r\n                    <Button variant=\"secondary\" onClick={this.CancelSelection}>\r\n                        בטל\r\n                    </Button>\r\n                    <Button variant=\"info\" onClick={this.acceptGroupSelection}>\r\n                        בחר\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>);\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { Modal, Button, Form } from 'react-bootstrap';\r\nimport User from '../model/user';\r\nimport ShoppingGroup from '../model/ShoppingGroup';\r\n\r\n//CreateNewGroupModal\r\n// used to create new group in the DB , and select this group as active\r\n// props:\r\n//    -activeUser- who is the active user\r\n//    -activeGroup- who is the current active group ( the one before this dialog was opened)\r\n//    -handleClose- the function that will be handling close this dialog\r\n//    -handleGroupSelection- the function that is responsible for the selection of the new created group \r\n//state: \r\n//   - newUserMail,newGroupName- the new values that the user has entered\r\n//   -users- the list of users , that was selected for the new group. will be sent to db\r\n//   - errorMessage- messages that will be shown to the user on the dialog footer\r\n\r\nexport default class CreateNewGroupModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.lstUsers=[];\r\n\r\n        // the uers is for the textarea\r\n        this.state={\r\n            newUserMail:\"\",\r\n            newGroupName:\"\",\r\n            users:[],\r\n            errorMessage:\"\"\r\n        }\r\n        \r\n       \r\n    }\r\n    //general function to handle all input changes\r\n    handleInputChange=(event)=> {\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    // this function checks if all mandatory fields are filled \r\n    //and creates a new group in the db\r\n    createNewGroup=()=>{\r\n        const{newGroupName,users}=this.state;\r\n        this.setState({\r\n            errorMessage:\"\"\r\n        })     \r\n        if (!newGroupName)\r\n        {\r\n            console.log ( \"in create new group:newGroupName is empty\")\r\n            this.setState({\r\n                errorMessage:\"new Group Name is empty\"\r\n            })     \r\n            return;\r\n        }\r\n        if (users.length===0)\r\n        {\r\n            console.log ( \"in create new group:there are no users defined\")\r\n            this.setState({\r\n                errorMessage:\"There are no users defined to the group\"\r\n            })     \r\n            return;\r\n        }\r\n\r\n        ShoppingGroup.CreateNewGroup(newGroupName, this.lstUsers).then(result=>{\r\n        \r\n                let NewGroup = new ShoppingGroup(result); \r\n                this.props.handleGroupSelection(NewGroup);  \r\n                this.props.handleClose();\r\n        \r\n        })\r\n      \r\n        .catch(error => {\r\n            console.error(\"error while Creating New Group\",error);\r\n            this.setState({\r\n                errorMessage:\"error while Creating New Group\"\r\n            })     \r\n        });\r\n                  \r\n    }\r\n    \r\n\r\n     \r\n    // this function adds a user to the users list\r\n    // the user should be in the db in order to add it to the group\r\n     AddUser=()=>{\r\n            const{newUserMail,users}=this.state\r\n            this.setState({\r\n                errorMessage:\"\"\r\n            })     \r\n            // find the user in the database  \r\n            // since mail is unique, only one user should be\r\n            User.findUserbyEmail(newUserMail).then(result=>{\r\n                this.setState({\r\n                    errorMessage:\"\"\r\n                })     \r\n                if (result!==undefined && result!==null && result.length>0) //should be only one user,// if does not exsist, do nothing\r\n                {\r\n                  this.lstUsers.push(result[0].id);  //enter the id of the user\r\n                  // add  the name to the textarea window\r\n                  this.setState({\r\n                      users: users.concat(newUserMail)\r\n                  })\r\n                }\r\n                else{\r\n                    this.setState({\r\n                        errorMessage:\"could not find this user\"\r\n                        })     \r\n                }\r\n            })\r\n              \r\n            .catch(error => {\r\n              console.error('Error while fetching ParseObjects', error);\r\n              this.setState({\r\n                errorMessage:\"Error in fetching the user\"\r\n                })     \r\n            });\r\n        \r\n     }\r\n\r\n    //return to select group....\r\n     CancelSelection=()=>{\r\n            this.props.handleClose(true);   // this may not work !!!\r\n    }\r\n\r\n    render() {\r\n        const { show, handleClose} = this.props;\r\n        const{newUserMail,newGroupName,users,errorMessage}=this.state\r\n      \r\n        const theUsers=users.join (\"\\n\");\r\n        \r\n        return (\r\n\r\n            <Modal show={show} className=\"group-settings\"  onHide={handleClose}>\r\n                <Modal.Header>\r\n                    <Modal.Title>יצירת קבוצה חדשה</Modal.Title>\r\n                </Modal.Header>\r\n            <Modal.Body>\r\n                \r\n                <Form.Group  >\r\n                    <Form.Label>שם קבוצה</Form.Label>\r\n                    <Form.Control type=\"text\" name=\"newGroupName\" value={newGroupName} placeholder=\"הכנס שם קבוצה\"  onChange={this.handleInputChange}/>\r\n                </Form.Group>\r\n                <Form.Group  >\r\n                    <Form.Label>הוסף משתמש</Form.Label>\r\n                    <Form.Control type=\"email\" name=\"newUserMail\" value={newUserMail} placeholder=\"הכנס דואר אלקטרוני\"  onChange={this.handleInputChange} />\r\n                </Form.Group>\r\n                <Button variant=\"info\" type=\"button\" onClick={this.AddUser}>\r\n                    הוסף משתמש\r\n                </Button >\r\n                <Form.Group >\r\n                    <Form.Label>רשימת משתמשים</Form.Label>\r\n                    <Form.Control as=\"textarea\" rows=\"3\" value={theUsers} />\r\n                </Form.Group>\r\n                \r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Form.Group>\r\n                            <Form.Label>{errorMessage}</Form.Label>\r\n                    </Form.Group>\r\n                    <Button variant=\"secondary\" onClick={this.CancelSelection}>\r\n                        בטל\r\n                    </Button>\r\n                    <Button variant=\"info\" onClick={this.createNewGroup}>\r\n                        צור\r\n                    </Button>\r\n\r\n                </Modal.Footer>\r\n            </Modal>);\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport './ShoppingItemComponent.css';\r\nimport { Container ,Popover,OverlayTrigger,Image,Form,Row,Col} from 'react-bootstrap';\r\nimport imageAddSource from '../images/Add.png'\r\n\r\nexport default class ShoppingItemComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n          this.state = {\r\n            wasChanged:false,\r\n            showChangeItemIcon:false, \r\n            fileImg: {\r\n                file: undefined,\r\n                URL:undefined\r\n            },\r\n            newCount:0,\r\n            \r\n        };\r\n        this.HandleOkPopup=this.HandleOkPopup.bind(this);\r\n    }\r\n\r\n    componentDidMount()\r\n    {   \r\n        const {item}=this.props;\r\n        this.setState({\r\n            newCount:item.count,\r\n        })\r\n        if (item.imgFile)\r\n        {\r\n            this.setState({\r\n                fileImg:{\r\n                    file: item.imgFile,\r\n                    URL:URL.createObjectURL(item.imgFile.URL.createObjectURL)\r\n                }\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n    /******************************************** */\r\n    //Popover functions=\r\n    enterEditingItem=(event)=>{\r\n        const {item}=this.props;\r\n        this.setState({\r\n            newCount:item.count,\r\n        })\r\n        if (item.imgFile)\r\n        {\r\n            this.setState({\r\n                fileImg:{\r\n                    file: item.imgFile,\r\n                    URL:URL.createObjectURL(item.imgFile.URL.createObjectURL)\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    HandleClosePopup=(event)=>{\r\n        this.refs.overlay.handleHide();\r\n    \r\n    }\r\n   async HandleOkPopup(event)\r\n   {\r\n        const {fileImg,newCount}=this.state;\r\n        const{item}=this.props;\r\n        this.setState({\r\n            wasChanged:false,\r\n            });\r\n\r\n        if (item.count!==newCount)\r\n        {\r\n            item.UpdateShoppingItemCount(newCount).then(result=>{\r\n                    item.count=newCount;\r\n                    this.setState({\r\n                        wasChanged:true,\r\n                        });\r\n                })\r\n                .catch(error => {\r\n                    console.error(\"error while updating Shopping item\",error);\r\n                });\r\n               \r\n\r\n        }\r\n        if (item.fileImg!==fileImg.file)\r\n        {\r\n            item.UpdateShoppingItemImage(fileImg.file).then(result=>{\r\n                item.img=fileImg.file;\r\n                this.setState({\r\n                    wasChanged:true,\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                console.error(\"error while updating Shopping item\",error);\r\n                    \r\n            });\r\n           \r\n\r\n        }\r\n\r\n        this.refs.overlay.handleHide();\r\n        \r\n    }\r\n\r\n    HandlePropertiesItem=(event)=>{\r\n        if (this.state.showUpdateProperties===true)\r\n        {\r\n            return;\r\n        }\r\n    }\r\n    handleCountChange=(event)=>{\r\n        this.setState({\r\n            newCount:event.target.valueAsNumber\r\n        })\r\n\r\n    }\r\n\r\n\r\n    handleFileChange=(event)=> {\r\n        let newFileImg;\r\n        if (event.target.files[0]) {\r\n            newFileImg = {\r\n                file: event.target.files[0],\r\n                URL: URL.createObjectURL(event.target.files[0])\r\n            }\r\n        } else {\r\n            newFileImg = {\r\n                file: undefined,\r\n                URL: undefined\r\n            }\r\n        }\r\n            this.setState({fileImg: newFileImg});        \r\n        }\r\n\r\n    /******************************************** */\r\n    //component functions\r\n        HandleDeleteItem=(index)=>{\r\n            this.props.item.isCompleted=!this.props.item.isCompleted;\r\n                this.setState({\r\n                    wasChanged:true,\r\n                    });\r\n        }\r\n\r\n      \r\n        HandleMouseLeave=(event)=>{         \r\n            this.setState({\r\n                showChangeItemIcon:false\r\n                })\r\n        }\r\n\r\n        handleMouseEnter=(event)=>{\r\n           \r\n            this.setState({\r\n                showChangeItemIcon:true\r\n                })\r\n        }\r\n\r\n        render()\r\n        {\r\n            const { item } = this.props;\r\n            const {fileImg,showImagetooltip}=this.state;\r\n \r\n            let completedClass = \"\";\r\n            if (item.isCompleted) {\r\n                completedClass = \"linethrough-text\";\r\n            }\r\n            else {\r\n                completedClass = \"regular-text\";\r\n            }\r\n            let itemText=item.count + ' '+ item.name;\r\n           \r\n            const popover = \r\n            (\r\n                <Popover id=\"popover-basic\" >\r\n                  <Popover.Title as=\"h3\">{item.name} : עדכון    \r\n                        <button onClick={this.HandleClosePopup}>X</button>\r\n                  </Popover.Title>\r\n                  <Popover.Content>\r\n                        <Form.Group>\r\n                            <Row>\r\n                                <Col>\r\n                                    <Form.Label>כמות</Form.Label>\r\n                                </Col>\r\n                                <Col>\r\n                                    <Form.Control type=\"number\" placeholder={item.count} min=\"1\" onChange={this.handleCountChange} />\r\n                                </Col>\r\n                            </Row>\r\n                        </Form.Group>\r\n                        <Form.Group>\r\n                            <Form.Label>תמונה</Form.Label>\r\n                            <Row>\r\n                                <Col>\r\n                                    <Form.Control type=\"file\" onChange={this.handleFileChange} />\r\n                                </Col>\r\n                            </Row> \r\n                            <Row>\r\n                                <Col>\r\n                                    <Image src={fileImg.URL} fluid/>\r\n                                </Col>\r\n                            </Row>\r\n\r\n                        </Form.Group>\r\n\r\n                        <button variant=\"info\" onClick={this.HandleOkPopup}>שנה</button>\r\n                        <button onClick={this.HandleClosePopup}>סגור</button>\r\n                  </Popover.Content>\r\n          \r\n                </Popover>\r\n              );\r\n\r\n            let deleteButtonClass=this.state.showChangeItemIcon===true?\"side-left\":\"hidden\"\r\n           \r\n            return (\r\n            <Container className=\"main-shopping-item\" onMouseOver={this.handleMouseEnter} onMouseLeave={this.HandleMouseLeave}  >\r\n                <p>\r\n               \r\n                <label className={completedClass} onClick={this.HandleDeleteItem.bind(this, item.id)} tooltip={item.id}>\r\n                    {itemText}                \r\n                </label>\r\n                <OverlayTrigger trigger=\"click\" onEnter={this.enterEditingItem} placement=\"bottom\" overlay={popover} rootClose ref=\"overlay\">\r\n                    <button className={deleteButtonClass} onClick={this.HandlePropertiesItem} >\r\n                        <img src={imageAddSource} alt=\"Add\" />\r\n                    </button> \r\n                </OverlayTrigger>\r\n                </p>\r\n\r\n            </Container>\r\n           \r\n            );\r\n        }\r\n    \r\n}\r\n","import React, { Component } from 'react'\r\nimport {Tabs,Tab} from 'react-bootstrap';\r\nimport './CategoryListComponents.css';\r\n\r\nexport default class CategoryListComponents extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state={\r\n            categoryArray:[],\r\n            selectedTab:\"\"\r\n        }   \r\n    }\r\n    componentDidMount(){\r\n        const {categoryArray}=this.state\r\n        if (categoryArray && categoryArray.length>0)\r\n        {\r\n            this.setState({\r\n                selectedTab:categoryArray[0].name\r\n            });\r\n            this.props.setActiveShoppingList(categoryArray[0].name);\r\n        }\r\n        else\r\n        {\r\n            this.setState({\r\n                selectedTab: \"\"\r\n            }); \r\n        }\r\n\r\n    }\r\n\r\n    handleSelect= event =>{\r\n        this.setState({\r\n            selectedTab: event\r\n        });\r\n        this.props.setActiveShoppingList(event); // send the selected category to get its matchd shopping list\r\n      }\r\n\r\n\r\n    render() {\r\n        const {categoryArray}=this.props;\r\n        const {selectedTab}=this.state;\r\n        \r\n        let itemsLists=[];\r\n        \r\n        if (categoryArray && categoryArray.length>0)\r\n        {\r\n           \r\n            categoryArray.forEach((element,index) => {\r\n               \r\n                itemsLists.push(\r\n                <Tab className=\"vertical\" eventKey={element.name} title={element.name} key={index} >\r\n                </Tab>)\r\n            });\r\n\r\n        }\r\n        // else\r\n        // {\r\n        //     itemsLists.push(\r\n        //         <Tab />);\r\n        // }\r\n\r\n        return (           \r\n            <div className=\"category-list-main\">\r\n                <Tabs activeKey={selectedTab} onSelect={this.handleSelect}>\r\n                    {itemsLists}\r\n                </Tabs> \r\n            </div>\r\n         \r\n        )\r\n    }\r\n}\r\n","import Parse from 'parse';\r\nexport default class ShoppingItem\r\n{\r\n    // img is optional\r\n    // shoppingItemId is the id of the object from the db\r\n    constructor(shoppingItemId,name,img,count)\r\n    {\r\n        this.shoppingItemId=shoppingItemId;\r\n        this.name=name;\r\n        this.img=img;  // optional\r\n        this.count=count;\r\n          \r\n    }\r\n\r\n\r\n  static async  addShoppingItem(newShoppingItem)\r\n  {\r\n    const ShoppingItem=Parse.Object.extend('ShoppingItem');\r\n    const newShoppingItemObject=new ShoppingItem();\r\n\r\n    const ProductItem=Parse.Object.extend('productItem');\r\n    const newProductItemObject=new ProductItem();\r\n    newProductItemObject.set('productName',newShoppingItem.name);\r\n\r\n    var parseFile=(newShoppingItem.img)? new Parse.File(newShoppingItem.img.name,newShoppingItem.img):undefined;\r\n    if (parseFile)\r\n    {\r\n        newProductItemObject.set('productImageSrc',parseFile);\r\n    }\r\n    newShoppingItemObject.set(\"productItemPointer\",newProductItemObject);\r\n    newShoppingItemObject.set('count',newShoppingItem.count);\r\n\r\n    let newObject=await newShoppingItemObject.save();\r\n    return newObject;\r\n\r\n  }\r\n\r\n  static async readShoppingItemList()\r\n  {\r\n    const ParseShoppingItem = Parse.Object.extend('ShoppingItem');\r\n    const query = new Parse.Query(ParseShoppingItem);\r\n    const ShoppingItemList=await query.find();\r\n    return ShoppingItemList;\r\n}\r\n\r\nstatic async getShoppingItemsParams(shoppingItem)  // shopping item is parse object\r\n  {   \r\n      let count=shoppingItem.get(\"count\");\r\n      let shoppingItemId=shoppingItem.id;\r\n      let product=shoppingItem.get(\"productItemPointer\");\r\n      await product.fetch();\r\n      let productName=product.get(\"productName\");\r\n      let productImageSrc=product.get(\"productImageSrc\");\r\n      return new ShoppingItem(shoppingItemId,productName,productImageSrc,count);\r\n\r\n  }\r\n    async UpdateShoppingItemCount(newCount)\r\n    {      \r\n        const ShoppingItemParse = Parse.Object.extend('ShoppingItem');\r\n        const query = new Parse.Query(ShoppingItemParse);\r\n        const object = await query.get(this.shoppingItemId);\r\n        object.set('count', newCount);\r\n        const response = await object.save();\r\n        return response;\r\n\r\n\r\n    }\r\n\r\n    async UpdateShoppingItemImage( newfile)\r\n    {       \r\n        const ShoppingItemParse = Parse.Object.extend('ShoppingItem');\r\n        const query = new Parse.Query(ShoppingItemParse);\r\n        const object=await query.get(this.shoppingItemId);\r\n        let product=object.get(\"productItemPointer\");\r\n        var parseFile=(newfile)? new Parse.File(newfile.name,newfile):undefined;\r\n            if (parseFile)\r\n            {\r\n                product.set('productImageSrc',parseFile);\r\n            }\r\n        \r\n            const response=await  product.save();\r\n            return response;\r\n      \r\n\r\n    }\r\n\r\n\r\n   \r\n}","import Parse from 'parse';\r\nexport default class ShoppingItem\r\n{\r\n\r\n     static async addShoppingItemToList(activeShoppingList,shoppingItem) \r\n     {\r\n         // get the shopping item\r\n        const ParseShoppingItem = Parse.Object.extend('ShoppingItem');\r\n        const query = new Parse.Query(ParseShoppingItem);\r\n        const theShoppingItem=await query.get (shoppingItem.shoppingItemId);\r\n\r\n        var relation = activeShoppingList.relation(\"shoppingItems\");\r\n        relation.add(theShoppingItem);\r\n        const result=await activeShoppingList.save();\r\n\r\n        return result;\r\n\r\n     }\r\n\r\n     static async GetShoppingItemsByList(ShoppingList){\r\n\r\n        var itemsRelation = ShoppingList.relation(\"shoppingItems\");\r\n        var queryItems = itemsRelation.query();\r\n        const shoppingItems=await queryItems.find();\r\n        return shoppingItems;\r\n    \r\n}\r\n\r\n    \r\n}","import React, { Component } from 'react'\r\nimport { FormControl, InputGroup,Button,ListGroup, Container} from 'react-bootstrap';\r\nimport ShoppingItemComponent from './ShoppingItemComponent';\r\nimport './BaseListComponents.css';\r\nimport CategoryListComponents from './CategoryListComponents';\r\nimport ShoppingItem from '../model/ShoppingItem';\r\nimport ShoppingGroup from '../model/ShoppingGroup';\r\nimport ShoppingList from '../model/ShoppingList';\r\n\r\nexport default class BaseListComponents extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            newItemText: \"\",\r\n            imgFile:undefined,\r\n            changeItemCount:false,\r\n            shoppingItemsArray:[],\r\n            activeShoppingList:null,\r\n            activeCategory:\"\"\r\n           \r\n        }\r\n        this.getShoppingItemsParams=this.getShoppingItemsParams.bind(this);\r\n      this.addShoppingItem=this.addShoppingItem.bind(this);\r\n      this.setActiveShoppingList=this.setActiveShoppingList.bind(this);\r\n    }\r\n\r\n\r\n    // handle input text change\r\n    handleInputChange=(event)=> {\r\n        const newText = event.target.value\r\n        this.setState({\r\n            newItemText: newText\r\n        });\r\n    }\r\n\r\n    // handle for enter key to accept changes\r\n    handleKeyDownEvent=(event)=>{\r\n        if (event.key === 'Enter') {\r\n            this.HandleNewItem(event);\r\n        }\r\n    }\r\n\r\n     // handle New item is added to the list\r\n    HandleNewItem=(event)=>{    \r\n\r\n        const {newItemText,imgFile}=this.state;\r\n        if (!newItemText)\r\n        {\r\n            console.log(\"new shopping item text cannot be empty\");\r\n            return;\r\n        }\r\n        let initialCount=1;\r\n        let newShoppingItem=new ShoppingItem(0,newItemText,imgFile,initialCount);\r\n        // call adding the item\r\n        this.addShoppingItem(newShoppingItem);\r\n\r\n\r\n        // clean the fields\r\n        this.setState({\r\n                newItemText:\"\",\r\n                changeItemCount:true\r\n            })\r\n        \r\n    }\r\n\r\n\r\n    async addShoppingItem(newShoppingItem)\r\n    {\r\n       const {activeCategory,activeShoppingList}=this.state;\r\n       const {activeGroup} =this.props;\r\n        ShoppingItem.addShoppingItem(newShoppingItem)\r\n          .then(result=>{\r\n             newShoppingItem.shoppingItemId=result.id; // update the id\r\n             // add the new item to the current shoppping list\r\n            // if the activeShopping list is empty, we need to create one \r\n            if (!activeShoppingList)\r\n            {\r\n                activeGroup.CreateNewShoppingListinGroup(activeCategory)  \r\n                .then(result=>{        \r\n                    this.ClearCategoryDialog();\r\n                    this.props.handleCategoryClose(true);\r\n                }) \r\n                .catch(error=>{\r\n                    console.error('Error while creating new shopping List: ', error);\r\n                    this.setState({\r\n                            errorMessage:\"Error in connection to db\"\r\n                    })                     \r\n                })\r\n\r\n            }\r\n            // add the item to the current shopping list\r\n            ShoppingList.addShoppingItemToList(activeShoppingList, newShoppingItem)\r\n             .then(result=>{\r\n                console.log(result);\r\n\r\n                this.setState({\r\n                    shoppingItemsArray:this.state.shoppingItemsArray.concat(newShoppingItem)\r\n                    });\r\n                \r\n             })\r\n             .catch(error=>{\r\n                    console.error(\"error while adding New Shopping item to shopping list\",error);\r\n             })\r\n             \r\n          })\r\n          .catch(error=>{\r\n              console.error(\"error while creating New Shopping item\",error);\r\n          });\r\n    }\r\n\r\n    async getShoppingItemsParams(shoppingItem)\r\n  {   \r\n      \r\n      ShoppingItem.getShoppingItemsParams(shoppingItem)\r\n      .then(newItem=>{\r\n          this.setState({\r\n            shoppingItemsArray:this.state.shoppingItemsArray.concat(newItem)\r\n          });\r\n        })\r\n      .catch(error=>{\r\n          console.error(\"error while creating New Shopping item\",error);\r\n      });\r\n\r\n  }\r\n\r\n    //actions to do when a task is completed\r\n    CompletedTaskHandler=(count)=>{\r\n        this.setState({\r\n            changeItemCount:true\r\n        });\r\n        \r\n    }\r\n\r\n \r\n    async setActiveShoppingList(categoryName)\r\n    {   \r\n        const {activeGroup}=this.props;\r\n        // clean the list\r\n        this.setState({\r\n            shoppingItemsArray:[],\r\n            activeCategory:categoryName\r\n            });\r\n\r\n         // get the shopping list according to the active group and the selected category     \r\n         activeGroup.GetShoppingListByCategoryAndGroup(categoryName)\r\n        .then(theShoppingList=>{\r\n           // update the active shopping list\r\n           this.setState({\r\n            activeShoppingList:theShoppingList\r\n           })\r\n           // update the list itself\r\n           if (theShoppingList)\r\n           {\r\n                ShoppingList.GetShoppingItemsByList(theShoppingList).then(shoppingItems=>{\r\n                    if (shoppingItems.length>0)\r\n                    {\r\n                            shoppingItems.forEach(item=>{\r\n                                this.getShoppingItemsParams(item);\r\n                            });\r\n                        }  \r\n                })\r\n            }\r\n         })\r\n        \r\n         .catch(error=>{\r\n             console.error(\"error while trying to get a shopping list\",error);\r\n         });\r\n\r\n    }\r\n\r\n   \r\n    render() {\r\n        const {newItemText,shoppingItemsArray,activeCategory}=this.state;\r\n        const {categoryArray}=this.props;\r\n        \r\n        //list\r\n        let itemsLists=[];\r\n        shoppingItemsArray.forEach((element,index) => {\r\n            itemsLists.push(<ShoppingItemComponent item={element} key={index} OnCompletedTask={this.CompletedTaskHandler} ></ShoppingItemComponent>)\r\n         }  );\r\n\r\n        const isDisablesInput=activeCategory && activeCategory!==\"\"?false:true\r\n          \r\n  \r\n        return (\r\n          \r\n            <Container>  \r\n                <CategoryListComponents categoryArray={categoryArray} setActiveShoppingList={this.setActiveShoppingList}>\r\n                </CategoryListComponents>\r\n                <div className=\"main-base-list\">\r\n                <ListGroup>\r\n                    {itemsLists}\r\n                </ListGroup>\r\n              \r\n                 <InputGroup className=\"mb-3\" size=\"lg\" >\r\n                    <FormControl className=\"input\"\r\n                        placeholder=\"הוסף פריט\"\r\n                        aria-label=\"הוסף פריט\"\r\n                        aria-describedby=\"basic-addon2\"\r\n                        value={newItemText} \r\n                         onChange={this.handleInputChange}\r\n                         onKeyDown={this.handleKeyDownEvent}\r\n                         disabled={isDisablesInput }\r\n                    />\r\n                    <InputGroup.Append>\r\n                        <Button variant=\"info\"  onClick={this.HandleNewItem} disabled={isDisablesInput }>הוסף</Button>\r\n                       \r\n                    </InputGroup.Append>\r\n                </InputGroup>\r\n                </div>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Modal, Button, Form,Row,Col } from 'react-bootstrap';\r\nimport Category from '../model/Category';\r\nimport ShoppingGroup from '../model/ShoppingGroup';\r\nimport ShoppingList from '../model/ShoppingList';\r\n\r\n\r\nexport default class CategoryNewModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state={\r\n            name:\"\",\r\n            imgFile:undefined,\r\n            errorMessage:\"\"\r\n        }  \r\n    }\r\n    //general function to handle all input changes\r\n    handleInputChange=(event)=> {\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    // this function checks if all mandatory fields are filled \r\n    //and creates a new group in the db\r\n    createNewCategory=()=>{\r\n        const{name,imgFile}=this.state;\r\n        const {activeGroup}=this.props;\r\n        this.setState({\r\n            errorMessage:\"\"\r\n        })     \r\n        if (!name)\r\n        {\r\n            console.log ( \"in create new category:category name is empty\")\r\n            this.setState({\r\n                errorMessage:\"new Category Name is empty\"\r\n            })     \r\n            return;\r\n        }       \r\n        // create the category in the db and add the new category to the current group\r\n        // add a new shopping List to this category and add this shopping List to this group      \r\n         Category.createNewCategory(name,imgFile)\r\n            .then(newCategory => {            \r\n                // add the category to the corrent group\r\n                activeGroup.addCategoryToGroup(newCategory)\r\n                .then(result=>{\r\n                        this.props.activeGroup.CreateNewShoppingListinGroup(newCategory)\r\n                         .then(result=>{\r\n                            // set this category as selected, and show the content in the tab\r\n                            // close the dialog\r\n                            this.ClearCategoryDialog();\r\n                            this.props.handleCategoryClose(true);\r\n                         })\r\n                        .catch(error=>{\r\n                            console.error('Error while creating new shopping List: ', error);\r\n                            this.setState({\r\n                                    errorMessage:\"Error in connection to db\"\r\n                            })                                       \r\n                        })\r\n                    })\r\n                   \r\n                .catch(error=>{\r\n                        console.error('Error while creating connection category to group: ', error);\r\n                        this.setState({\r\n                                errorMessage:\"Error in connection to db\"\r\n                        })                   \r\n                    })\r\n\r\n            })\r\n            .catch(error => {\r\n                console.error('Error while creating new category: ', error);\r\n                this.setState({\r\n                        errorMessage:\"Error in connection to db\"\r\n                })                   \r\n            });\r\n         }\r\n    \r\n\r\n     \r\n         handleFileChange=(event)=> {\r\n            if (event.target.files[0]) {\r\n                this.setState({\r\n                    imgFile:event.target.files[0]\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    imgFile:undefined\r\n                })\r\n            }     \r\n        }\r\n\r\n    // clear all field  and close dialog.\r\n    // since it is modal , it is not created again when reoprn. only hide and show\r\n    ClearCategoryDialog=()=>{\r\n        this.setState({\r\n            errorMessage:\"\",\r\n            imgFile:undefined,\r\n            name:\"\"\r\n        })  \r\n    }\r\n\r\n    //return to select group....\r\n     CancelSelection=()=>{\r\n            this.ClearCategoryDialog();\r\n            this.props.handleCategoryClose(false);   \r\n    }\r\n  \r\n    render() {\r\n        const { show, handleCategoryClose} = this.props;\r\n        const{name,errorMessage}=this.state\r\n        return (\r\n\r\n            <Modal show={show} className=\"group-settings\"  onHide={handleCategoryClose}>\r\n                <Modal.Header>\r\n                    <Modal.Title>יצירת קטגוריה חדשה</Modal.Title>\r\n                </Modal.Header>\r\n            <Modal.Body>\r\n                \r\n                <Form.Group  >\r\n                    <Form.Label>שם קטגוריה</Form.Label>\r\n                    <Form.Control type=\"text\" name=\"name\" value={name} placeholder=\"הכנס שם קטגוריה\"  onChange={this.handleInputChange}/>\r\n                </Form.Group>\r\n                 \r\n                <Form.Group>\r\n                            <Form.Label>Image URL</Form.Label>\r\n                            <Row>\r\n                                <Col>\r\n                            <Form.Control type=\"file\" onChange={this.handleFileChange} />\r\n                                </Col>\r\n                            </Row>\r\n                        </Form.Group>\r\n                \r\n            </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Form.Group>\r\n                            <Form.Label>{errorMessage}</Form.Label>\r\n                    </Form.Group>\r\n                    <Button variant=\"secondary\" onClick={this.CancelSelection}>\r\n                        בטל\r\n                    </Button>\r\n                    <Button variant=\"info\" onClick={this.createNewCategory}>\r\n                        צור\r\n                    </Button>\r\n\r\n                </Modal.Footer>\r\n            </Modal>);\r\n    }\r\n}","import React,{ Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport SelectActiveGroupModal from '../components/SelectActiveGroupModal';\r\nimport CreateNewGroupModal from '../components/CreateNewGroupModal';\r\nimport {Navbar ,Nav} from 'react-bootstrap';\r\nimport BaseListComponents from '../components/BaseListComponents';\r\nimport CategoryNewModal from '../components/CategoryNewModal';\r\n//import ShoppingItem from '../model/ShoppingItem';\r\nimport ShoppingGroup from '../model/ShoppingGroup';\r\n\r\n\r\nexport default class ShoppingPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          redirectToLogin:false,\r\n          showSelectActiveGroup: true,\r\n          showCreateActiveGroup:false,\r\n          showCategoryNew:false,\r\n          categoryArray:[],\r\n          isNewCategory:false,\r\n          // shoppingItemsArray:[]\r\n      }\r\n      this.readCategoryListbyGroup=this.readCategoryListbyGroup.bind(this);\r\n      //this.getShoppingItemsParams=this.getShoppingItemsParams.bind(this);\r\n      //this.addShoppingItem=this.addShoppingItem.bind(this);\r\n    }\r\n\r\n    //************************************************************* */\r\n    logout=()=> {\r\n      // This eventually calls the handleLogout method of the App component\r\n      this.props.handleLogout();\r\n\r\n      this.setState({\r\n          redirectToLogin: true\r\n      })\r\n  }\r\n\r\n    //******************************************************************** */\r\n    // Shopping list functions\r\n  //   async readShoppingItemList(){      \r\n  //         ShoppingItem.readShoppingItemList()\r\n  //           .then(shoppingListResults=>{\r\n  //             shoppingListResults.forEach(              \r\n  //               (item,index)=>\r\n  //               {\r\n  //                 this.getShoppingItemsParams(item);\r\n  //               }\r\n  //           )\r\n\r\n  //         })\r\n\r\n  // }\r\n \r\n//  async getShoppingItemsParams(shoppingItem)\r\n//   {   \r\n      \r\n//       ShoppingItem.getShoppingItemsParams(shoppingItem)\r\n//       .then(newItem=>{\r\n//           this.setState({\r\n//             shoppingItemsArray:this.state.shoppingItemsArray.concat(newItem)\r\n//           });\r\n//         })\r\n//       .catch(error=>{\r\n//           console.error(\"error while creating New Shopping item\",error);\r\n//       });\r\n\r\n//   }\r\n\r\n  // addShoppingItem(newShoppingItem)\r\n  // {\r\n    \r\n  //     ShoppingItem.addShoppingItem(newShoppingItem)\r\n  //       .then(result=>{\r\n  //          newShoppingItem.id=result.id; // update the id\r\n  //          // add the new item to the current shoppping list\r\n  //          // sigal -to do....\r\n\r\n  //          this.setState({\r\n  //           shoppingItemsArray:this.state.shoppingItemsArray.concat(newShoppingItem)\r\n  //           });\r\n  //       })\r\n  //       .catch(error=>{\r\n  //           console.error(\"error while creating New Shopping item\",error);\r\n  //       });\r\n  // }\r\n//******************************************************************** */\r\n   \r\n// Category list functions\r\n\r\n  async readCategoryListbyGroup(){\r\n    ShoppingGroup.readCategoryListbyGroup(this.props.activeGroup)\r\n    .then(lstItems=>{\r\n          this.setState({\r\n              categoryArray:lstItems,\r\n          });\r\n\r\n    })\r\n    .catch(error => {\r\n      console.error('error getting the categories', error);\r\n      this.setState({\r\n        categoryArray:[],\r\n              });\r\n  });\r\n    \r\n  \r\n }\r\n    \r\n    handleClose=(isToSelection) =>{\r\n      if (isToSelection){\r\n         this.setState({\r\n          showSelectActiveGroup: true,\r\n          showCreateActiveGroup:false\r\n        })\r\n      }\r\n      else{\r\n         this.setState({\r\n          showSelectActiveGroup: false,\r\n          showCreateActiveGroup:false\r\n        })\r\n      } \r\n  }\r\n\r\n  handleCategoryClose=(isNewCategory)=>{\r\n    this.setState({\r\n        showCategoryNew:false,\r\n    })\r\n    if (isNewCategory)\r\n    {\r\n      this.readCategoryListbyGroup();\r\n\r\n    }\r\n  }\r\n\r\n  HandleCategoryOpen=()=>{\r\n    this.setState({\r\n      showCategoryNew:true\r\n     })\r\n  }\r\n  //******************************************************************** */\r\n  // Group functions\r\n    HandleCreateNewGroup=()=>\r\n    {\r\n      this.setState({\r\n        showSelectActiveGroup: false,\r\n        showCreateActiveGroup:true\r\n      })\r\n    }\r\n\r\n  handleGroupSelection=(group)=>\r\n  {\r\n    // hadle the opening of the select group section\r\n    this.props.setGroup(group);\r\n    // read the lists according to the selected group\r\n    this.readCategoryListbyGroup();\r\n    //this.readShoppingItemList();\r\n  }\r\n\r\n//******************************************************************** */\r\n    // render\r\n  render() {\r\n      const {activeUser,activeGroup}=this.props;\r\n      const {redirectToLogin,showSelectActiveGroup, showCreateActiveGroup,showCategoryNew,\r\n        categoryArray}=this.state;\r\n\r\n      const logoutLink = activeUser ? <Nav.Link onClick={this.logout}>יציאה</Nav.Link> : null;  //should not be situation whenre there is no active user\r\n\r\n      if (redirectToLogin) {\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n      if (!activeUser) {\r\n        return <Redirect to=\"/\"/>\r\n      }\r\n      let activeGroupName=\"\";\r\n      if (activeGroup!=null)\r\n      {\r\n        activeGroupName=activeGroup.groupName;\r\n      }\r\n\r\n      return (\r\n          <div>\r\n            <Navbar expand=\"lg\">\r\n              <Navbar.Brand href=\"#home\">\r\n                      <img\r\n                        alt=\"\"\r\n                        src=\"../images/ShareToBuy.png\"\r\n                        width=\"30\"\r\n                        height=\"30\"\r\n                        className=\"d-inline-block align-top\"\r\n                      />{' '}\r\n                      ShareToBuy\r\n                    </Navbar.Brand>\r\n              <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n              <Navbar.Collapse id=\"basic-navbar-nav\">\r\n                <Nav className=\"mr-auto\">\r\n                      <Nav.Link  onClick={this.HandleCategoryOpen}>הוסף קטגוריה</Nav.Link>\r\n                      <Nav.Link href=\"#link\">בחירת מוצר מרשימה</Nav.Link>   \r\n                      {logoutLink}          \r\n                    </Nav>\r\n              </Navbar.Collapse>\r\n            </Navbar>\r\n            \r\n\r\n             <p>שלום {activeUser.email} </p>\r\n             <p> קבוצתך היא {activeGroupName}</p>\r\n             <div className=\"main-shopping-page\">           \r\n                <BaseListComponents activeGroup={activeGroup} categoryArray={categoryArray}  >\r\n                 </BaseListComponents>\r\n                <SelectActiveGroupModal show={showSelectActiveGroup} handleClose={this.handleClose} handleGroupSelection={this.handleGroupSelection} HandleCreateNewGroup= {this.HandleCreateNewGroup} activeUser={activeUser} activeGroup={activeGroup}/>\r\n                <CreateNewGroupModal show={showCreateActiveGroup} handleClose={this.handleClose} activeUser={activeUser} activeGroup={activeGroup}  handleGroupSelection={this.handleGroupSelection} />\r\n                <CategoryNewModal show={showCategoryNew} handleCategoryClose={this.handleCategoryClose} activeGroup={activeGroup}  handleGroupSelection={this.handleGroupSelection} />\r\n            </div>\r\n          </div>\r\n\r\n\r\n      );\r\n  }\r\n\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport { Switch, Route,HashRouter  } from 'react-router-dom'\r\nimport LoginPage from './pages/LoginPage';\r\nimport ShoppingPage from './pages/ShoppingPage';\r\nimport Parse from 'parse'\r\n\r\nexport default class App extends React.Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    //saving the  objects from the model\r\n    this.state = {\r\n      activeUser: Parse.User.current(),\r\n      activeGroup:null\r\n    }\r\n\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n    this.handleLogin = this.handleLogin.bind(this);\r\n  }\r\n\r\n  handleLogin(user) {\r\n    this.setState({\r\n      activeUser: user,\r\n      activeGroup: null\r\n    });\r\n  }\r\n\r\n  handleLogout() {\r\n    this.setState({\r\n      activeUser: null,\r\n      activeGroup: null\r\n    })\r\n    Parse.User.logOut();\r\n  }\r\n\r\n  setGroup=(group)=>\r\n  {\r\n    this.setState({\r\n      activeGroup: group\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { activeUser,activeGroup } = this.state;\r\n      return (\r\n        // <div className=\"App\">\r\n         <HashRouter>\r\n            <Switch>\r\n                <Route exact path=\"/\">\r\n                  <LoginPage  handleLogin={this.handleLogin} getGroup={this.getGroup}></LoginPage>\r\n                </Route>\r\n                <Route exact path=\"/shopping\">\r\n                  <ShoppingPage handleLogout={this.handleLogout} activeUser={activeUser} activeGroup={activeGroup} setGroup={this.setGroup} ></ShoppingPage>\r\n                </Route>\r\n               \r\n            </Switch>\r\n          </HashRouter>\r\n          \r\n        // </div>\r\n      );\r\n  }\r\n\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport Parse from 'parse';\r\n\r\nParse.serverURL = 'https://parseapi.back4app.com'; // This is your Server URL\r\nParse.initialize(\r\n  'RxNV8NwdLxj6ybkoL0AvcbgxXqfyRthKENFqWmQj', // This is your Application ID\r\n  '7CqXhbdXpQA6nJqp5cp5Ytwe27mrO449qWGqqnBW' // This is your Javascript key\r\n);\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}